<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Integrated Garage Management System</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- External CSS Files -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      crossorigin="anonymous"
    />

    <!-- Modern Professional UI CSS -->
    <link rel="stylesheet" href="css/professional-ui.css" />
    <link rel="stylesheet" href="css/modern-layout.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="stylesheet" href="css/kanban-board.css" />
    <link rel="stylesheet" href="css/workshop-diary.css" />
    <link rel="stylesheet" href="css/job-sheets.css" />
    <link rel="stylesheet" href="css/online-booking.css" />

    <style>
      /* Integrated Dashboard Specific Styles */
      .integrated-header {
        background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        color: white;
        padding: 1.5rem;
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
        box-shadow:
          0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }

      .integrated-header h1 {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .integrated-header p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .system-status {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }

      .status-indicator {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background-color: rgba(255, 255, 255, 0.2);
        padding: 0.5rem 1rem;
        border-radius: 2rem;
      }

      .status-dot {
        width: 0.75rem;
        height: 0.75rem;
        border-radius: 50%;
      }

      .status-dot.active {
        background-color: #10b981;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
      }

      .status-dot.inactive {
        background-color: #ef4444;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3);
      }

      .module-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .module-card {
        background-color: white;
        border-radius: 0.5rem;
        box-shadow:
          0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
        overflow: hidden;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .module-card:hover {
        transform: translateY(-5px);
        box-shadow:
          0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      .module-header {
        padding: 1.5rem;
        border-bottom: 1px solid #e5e7eb;
      }

      .module-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #111827;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .module-icon {
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
        color: white;
      }

      .module-body {
        padding: 1.5rem;
      }

      .module-description {
        color: #4b5563;
        margin-bottom: 1.5rem;
      }

      .module-features {
        list-style-type: none;
        padding: 0;
        margin: 0 0 1.5rem 0;
      }

      .module-features li {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        color: #374151;
      }

      .module-features li i {
        color: #10b981;
      }

      .module-footer {
        padding: 1rem 1.5rem;
        background-color: #f9fafb;
        border-top: 1px solid #e5e7eb;
      }

      .module-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 1rem;
      }

      .stat-item {
        text-align: center;
      }

      .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: #111827;
      }

      .stat-label {
        font-size: 0.875rem;
        color: #6b7280;
      }

      .btn-launch {
        display: block;
        width: 100%;
        padding: 0.75rem 1rem;
        background-color: #3b82f6;
        color: white;
        border: none;
        border-radius: 0.375rem;
        font-weight: 500;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.2s;
        text-decoration: none;
      }

      .btn-launch:hover {
        background-color: #2563eb;
      }

      .btn-launch i {
        margin-right: 0.5rem;
      }

      /* Module-specific colors */
      .module-icon.garage {
        background-color: #3b82f6;
      }

      .module-icon.mot {
        background-color: #10b981;
      }

      .module-icon.sms {
        background-color: #f59e0b;
      }

      .module-icon.settings {
        background-color: #6366f1;
      }

      /* Quick access section */
      .quick-access {
        background-color: white;
        border-radius: 0.5rem;
        box-shadow:
          0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
        padding: 1.5rem;
        margin-bottom: 2rem;
      }

      .quick-access-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #111827;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .quick-links {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }

      .quick-link {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        background-color: #f9fafb;
        border-radius: 0.375rem;
        color: #374151;
        text-decoration: none;
        transition: background-color 0.2s;
      }

      .quick-link:hover {
        background-color: #f3f4f6;
      }

      .quick-link-icon {
        width: 2rem;
        height: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.375rem;
        color: white;
      }

      .quick-link-text {
        font-weight: 500;
      }

      /* System info section */
      .system-info {
        background-color: white;
        border-radius: 0.5rem;
        box-shadow:
          0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
        padding: 1.5rem;
      }

      .system-info-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #111827;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .system-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
      }

      .info-item {
        padding: 1rem;
        background-color: #f9fafb;
        border-radius: 0.375rem;
      }

      .info-label {
        font-size: 0.875rem;
        color: #6b7280;
        margin-bottom: 0.25rem;
      }

      .info-value {
        font-weight: 500;
        color: #111827;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .module-grid {
          grid-template-columns: 1fr;
        }

        .system-status {
          flex-direction: column;
          gap: 0.5rem;
        }
      }
    </style>

    <!-- Emergency crash prevention -->
    <script src="js/emergency-protection.js"></script>
  </head>
  <body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
      <!-- Integrated Header -->
      <div class="integrated-header">
        <h1>
          <i class="fas fa-tools mr-2"></i>Integrated Garage Management System
        </h1>
        <p>
          Comprehensive solution for garage operations, MOT reminders, and
          customer communications
        </p>

        <div class="system-status">
          <div class="status-indicator">
            <div class="status-dot active" id="main-status-dot"></div>
            <span>Main System</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot active" id="mot-status-dot"></div>
            <span>MOT Service</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot active" id="sms-status-dot"></div>
            <span>SMS Service</span>
          </div>
        </div>
      </div>

      <!-- Quick Access Section -->
      <div class="quick-access">
        <h2 class="quick-access-title">
          <i class="fas fa-bolt"></i>
          Quick Access
        </h2>
        <div class="quick-links">
          <a href="/" class="quick-link">
            <div class="quick-link-icon" style="background-color: #3b82f6">
              <i class="fas fa-tachometer-alt"></i>
            </div>
            <span class="quick-link-text">Dashboard</span>
          </a>
          <a href="/mot/" class="quick-link">
            <div class="quick-link-icon" style="background-color: #10b981">
              <i class="fas fa-car"></i>
            </div>
            <span class="quick-link-text">MOT Reminders</span>
          </a>
          <a href="/mot/sms" class="quick-link">
            <div class="quick-link-icon" style="background-color: #f59e0b">
              <i class="fas fa-sms"></i>
            </div>
            <span class="quick-link-text">SMS Center</span>
          </a>
          <a href="/upload" class="quick-link">
            <div class="quick-link-icon" style="background-color: #6366f1">
              <i class="fas fa-upload"></i>
            </div>
            <span class="quick-link-text">Data Upload</span>
          </a>
        </div>
      </div>

      <!-- Module Grid -->
      <div class="module-grid">
        <!-- Main Garage Management Module -->
        <div class="module-card">
          <div class="module-header">
            <div class="module-title">
              <div class="module-icon garage">
                <i class="fas fa-tools"></i>
              </div>
              Garage Management
            </div>
          </div>
          <div class="module-body">
            <p class="module-description">
              Comprehensive garage management system for customer, vehicle, and
              job management.
            </p>
            <ul class="module-features">
              <li><i class="fas fa-check"></i> Customer Management</li>
              <li><i class="fas fa-check"></i> Vehicle Records</li>
              <li><i class="fas fa-check"></i> Job Tracking</li>
              <li><i class="fas fa-check"></i> Invoicing</li>
              <li><i class="fas fa-check"></i> Workshop Diary</li>
            </ul>
            <div class="module-stats">
              <div class="stat-item">
                <div class="stat-value" id="customer-count">0</div>
                <div class="stat-label">Customers</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="vehicle-count">0</div>
                <div class="stat-label">Vehicles</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="job-count">0</div>
                <div class="stat-label">Jobs</div>
              </div>
            </div>
          </div>
          <div class="module-footer">
            <a href="/" class="btn-launch">
              <i class="fas fa-external-link-alt"></i>
              Launch Garage Management
            </a>
          </div>
        </div>

        <!-- MOT Reminder Module -->
        <div class="module-card">
          <div class="module-header">
            <div class="module-title">
              <div class="module-icon mot">
                <i class="fas fa-car"></i>
              </div>
              MOT Reminder System
            </div>
          </div>
          <div class="module-body">
            <p class="module-description">
              Track MOT expiry dates and send timely reminders to customers.
            </p>
            <ul class="module-features">
              <li><i class="fas fa-check"></i> MOT Status Tracking</li>
              <li><i class="fas fa-check"></i> DVSA API Integration</li>
              <li><i class="fas fa-check"></i> Expiry Notifications</li>
              <li><i class="fas fa-check"></i> Bulk Vehicle Upload</li>
              <li><i class="fas fa-check"></i> Customer Data Management</li>
            </ul>
            <div class="module-stats">
              <div class="stat-item">
                <div class="stat-value" id="mot-total">0</div>
                <div class="stat-label">Vehicles</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="mot-expired">0</div>
                <div class="stat-label">Expired</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="mot-due-soon">0</div>
                <div class="stat-label">Due Soon</div>
              </div>
            </div>
          </div>
          <div class="module-footer">
            <a href="/mot/" class="btn-launch">
              <i class="fas fa-external-link-alt"></i>
              Launch MOT Dashboard
            </a>
          </div>
        </div>

        <!-- SMS Center Module -->
        <div class="module-card">
          <div class="module-header">
            <div class="module-title">
              <div class="module-icon sms">
                <i class="fas fa-sms"></i>
              </div>
              SMS Center
            </div>
          </div>
          <div class="module-body">
            <p class="module-description">
              Send automated SMS reminders to customers for MOT renewals and
              appointments.
            </p>
            <ul class="module-features">
              <li><i class="fas fa-check"></i> Automated Reminders</li>
              <li><i class="fas fa-check"></i> Custom Message Templates</li>
              <li><i class="fas fa-check"></i> Delivery Tracking</li>
              <li><i class="fas fa-check"></i> Bulk Messaging</li>
              <li><i class="fas fa-check"></i> SMS History</li>
            </ul>
            <div class="module-stats">
              <div class="stat-item">
                <div class="stat-value" id="sms-total">0</div>
                <div class="stat-label">Total Sent</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="sms-delivered">0</div>
                <div class="stat-label">Delivered</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="sms-pending">0</div>
                <div class="stat-label">Pending</div>
              </div>
            </div>
          </div>
          <div class="module-footer">
            <a href="/mot/sms" class="btn-launch">
              <i class="fas fa-external-link-alt"></i>
              Launch SMS Center
            </a>
          </div>
        </div>

        <!-- System Settings Module -->
        <div class="module-card">
          <div class="module-header">
            <div class="module-title">
              <div class="module-icon settings">
                <i class="fas fa-cogs"></i>
              </div>
              System Settings
            </div>
          </div>
          <div class="module-body">
            <p class="module-description">
              Configure system settings, manage data imports, and monitor system
              health.
            </p>
            <ul class="module-features">
              <li><i class="fas fa-check"></i> User Management</li>
              <li><i class="fas fa-check"></i> Data Import/Export</li>
              <li><i class="fas fa-check"></i> Google Drive Integration</li>
              <li><i class="fas fa-check"></i> System Monitoring</li>
              <li><i class="fas fa-check"></i> Backup & Restore</li>
            </ul>
            <div class="module-stats">
              <div class="stat-item">
                <div class="stat-value" id="system-uptime">100%</div>
                <div class="stat-label">Uptime</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="system-users">1</div>
                <div class="stat-label">Users</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="system-version">1.0</div>
                <div class="stat-label">Version</div>
              </div>
            </div>
          </div>
          <div class="module-footer">
            <a href="/settings" class="btn-launch">
              <i class="fas fa-cogs"></i>
              Launch Settings
            </a>
          </div>
        </div>
      </div>

      <!-- System Information -->
      <div class="system-info">
        <h2 class="system-info-title">
          <i class="fas fa-info-circle"></i>
          System Information
        </h2>
        <div class="system-info-grid">
          <div class="info-item">
            <div class="info-label">Main Application</div>
            <div class="info-value">http://127.0.0.1:8002</div>
          </div>
          <div class="info-item">
            <div class="info-label">MOT Service API</div>
            <div class="info-value">http://127.0.0.1:8001/api</div>
          </div>
          <div class="info-item">
            <div class="info-label">System Version</div>
            <div class="info-value">1.0.0</div>
          </div>
          <div class="info-item">
            <div class="info-label">Last Updated</div>
            <div class="info-value" id="last-updated">Loading...</div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript for the integrated dashboard -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Set current date for last updated
        const now = new Date();
        document.getElementById("last-updated").textContent =
          now.toLocaleDateString() + " " + now.toLocaleTimeString();

        // Check system status
        checkSystemStatus();

        // Load statistics
        loadStatistics();

        // Set up refresh interval
        setInterval(checkSystemStatus, 60000); // Check every minute
        setInterval(loadStatistics, 300000); // Refresh stats every 5 minutes
      });

      function checkSystemStatus() {
        // Check main system status
        fetch("/health")
          .then((response) => {
            if (response.ok) {
              document.getElementById("main-status-dot").className =
                "status-dot active";
            } else {
              document.getElementById("main-status-dot").className =
                "status-dot inactive";
            }
          })
          .catch(() => {
            document.getElementById("main-status-dot").className =
              "status-dot inactive";
          });

        // Check MOT service status
        fetch("/mot/api/health")
          .then((response) => {
            if (response.ok) {
              document.getElementById("mot-status-dot").className =
                "status-dot active";
            } else {
              document.getElementById("mot-status-dot").className =
                "status-dot inactive";
            }
          })
          .catch(() => {
            document.getElementById("mot-status-dot").className =
              "status-dot inactive";
          });

        // Check SMS service status
        fetch("/mot/api/sms/status")
          .then((response) => {
            if (response.ok) {
              document.getElementById("sms-status-dot").className =
                "status-dot active";
            } else {
              document.getElementById("sms-status-dot").className =
                "status-dot inactive";
            }
          })
          .catch(() => {
            document.getElementById("sms-status-dot").className =
              "status-dot inactive";
          });
      }

      function loadStatistics() {
        const container = document.getElementById("dashboard-content");
        if (!container) {
          console.warn(
            "Dashboard content container not found - this is normal for the integrated dashboard",
          );
          return;
        }

        // Load garage management statistics
        fetch("/api/stats")
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              const customerCount = document.getElementById("customer-count");
              const vehicleCount = document.getElementById("vehicle-count");
              const jobCount = document.getElementById("job-count");

              if (customerCount)
                customerCount.textContent = data.stats.customers || 0;
              if (vehicleCount)
                vehicleCount.textContent = data.stats.vehicles || 0;
              if (jobCount) jobCount.textContent = data.stats.jobs || 0;
            }
          })
          .catch((error) => {
            console.warn("Error loading garage stats:", error);
          });

        // Load MOT statistics
        fetch("/mot/api/sms/status")
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              const motTotal = document.getElementById("mot-total");
              const motExpired = document.getElementById("mot-expired");
              const motDueSoon = document.getElementById("mot-due-soon");

              if (motTotal) motTotal.textContent = data.statistics.total || 0;
              if (motExpired)
                motExpired.textContent = data.statistics.expired || 0;
              if (motDueSoon)
                motDueSoon.textContent = data.statistics.due_soon || 0;
            }
          })
          .catch((error) => {
            console.warn("Error loading MOT stats:", error);
          });

        // Load SMS statistics
        fetch("/mot/api/sms/history")
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              const total = data.history.length || 0;
              const delivered =
                data.history.filter(
                  (sms) => sms.delivery_status === "delivered",
                ).length || 0;
              const pending =
                data.history.filter(
                  (sms) =>
                    sms.delivery_status === "sent" ||
                    sms.delivery_status === "queued",
                ).length || 0;

              const smsTotal = document.getElementById("sms-total");
              const smsDelivered = document.getElementById("sms-delivered");
              const smsPending = document.getElementById("sms-pending");

              if (smsTotal) smsTotal.textContent = total;
              if (smsDelivered) smsDelivered.textContent = delivered;
              if (smsPending) smsPending.textContent = pending;
            }
          })
          .catch((error) => {
            console.warn("Error loading SMS stats:", error);
          });
      }
    </script>

    <!-- Screenshot Feedback Hotkey -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script>
      console.log("Screenshot feedback script loading...");

      // Check if html2canvas loaded
      if (typeof html2canvas !== "undefined") {
        console.log("‚úÖ html2canvas loaded successfully");
      } else {
        console.error("‚ùå html2canvas failed to load");
      }

      document.addEventListener("keydown", async function (e) {
        console.log(
          "Key pressed:",
          e.code,
          "Ctrl:",
          e.ctrlKey,
          "Shift:",
          e.shiftKey,
        );

        // Use Ctrl+Shift+S (easier to test than F12)
        if (e.ctrlKey && e.shiftKey && e.code === "KeyS") {
          console.log("Screenshot hotkey pressed!");
          e.preventDefault();

          try {
            // Prompt for text feedback
            const textFeedback = prompt("Add feedback (optional):", "");

            // Show loading message
            const loadingMsg = document.createElement("div");
            loadingMsg.style.cssText =
              "position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #333; color: white; padding: 20px; border-radius: 10px; z-index: 10000; font-family: Arial, sans-serif;";
            loadingMsg.textContent = "üì∏ Capturing screenshot...";
            document.body.appendChild(loadingMsg);

            // Try to find the best target element for screenshot
            const target =
              document.querySelector(".integrated-header") ||
              document.querySelector(".module-grid") ||
              document.querySelector(".container") ||
              document.body;

            if (!target) {
              document.body.removeChild(loadingMsg);
              alert("No target element found for screenshot");
              return;
            }

            console.log("Capturing screenshot of:", target);

            const canvas = await html2canvas(target, {
              backgroundColor: null,
              scale: 1,
              useCORS: true,
              allowTaint: true,
              logging: true,
            });

            const uri = canvas.toDataURL("image/png");
            console.log("Screenshot captured, size:", uri.length, "characters");

            // Remove loading message
            document.body.removeChild(loadingMsg);

            // Show success message
            const successMsg = document.createElement("div");
            successMsg.style.cssText =
              "position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #10b981; color: white; padding: 20px; border-radius: 10px; z-index: 10000; font-family: Arial, sans-serif;";
            successMsg.textContent = "üì§ Sending screenshot...";
            document.body.appendChild(successMsg);

            await sendFeedback(uri, textFeedback);

            // Remove success message
            document.body.removeChild(successMsg);
          } catch (error) {
            console.error("Error capturing screenshot:", error);
            alert("Failed to capture screenshot: " + error.message);
          }
        }
      });

      async function sendFeedback(imageData, textFeedback) {
        const payload = {
          image: imageData,
          route: window.location.pathname,
          time: new Date().toISOString(),
          build: "garage-dev",
          userAgent: navigator.userAgent,
          feedback: textFeedback || "",
        };

        try {
          console.log("Sending feedback to /api/feedback...");
          const response = await fetch("/api/feedback", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          console.log("Response status:", response.status);

          if (response.ok) {
            const result = await response.json();
            console.log("‚úÖ Screenshot sent successfully:", result);
            alert(
              "üì∏ Screenshot sent successfully!\n\nYou can find it in the feedback_screenshots folder.",
            );
          } else {
            const errorText = await response.text();
            console.error("Server error response:", errorText);
            throw new Error(
              `Server responded with ${response.status}: ${errorText}`,
            );
          }
        } catch (err) {
          console.error("Failed to send feedback:", err);
          alert("‚ùå Failed to send screenshot: " + err.message);
        }
      }

      console.log("Screenshot feedback script loaded and ready");
      console.log("üí° Press Ctrl+Shift+S to capture and send a screenshot");
    </script>

    <!-- Hash Navigation Script -->
    <script>
      // Handle hash navigation for direct links to specific sections
      function handleHashNavigation() {
        const hash = window.location.hash.substring(1); // Remove the # symbol

        if (hash) {
          console.log(`üîó Navigating to section: ${hash}`);

          // Wait for the page to fully load before navigating
          setTimeout(() => {
            if (typeof showPage === 'function') {
              showPage(hash);
            } else {
              console.warn(`‚ö†Ô∏è showPage function not available, trying to click nav item for: ${hash}`);

              // Fallback: try to click the navigation item
              const navItem = document.querySelector(`[onclick="showPage('${hash}')"]`);
              if (navItem) {
                navItem.click();
              } else {
                console.warn(`‚ö†Ô∏è Navigation item not found for: ${hash}`);
              }
            }
          }, 500); // Wait 500ms for page initialization
        }
      }

      // Handle hash navigation on page load
      document.addEventListener('DOMContentLoaded', handleHashNavigation);

      // Handle hash changes (back/forward navigation)
      window.addEventListener('hashchange', handleHashNavigation);

      console.log("üîó Hash navigation script loaded");
    </script>

    <!-- Debug System -->
    <script src="/js/debug-system.js"></script>
  </body>
</html>
